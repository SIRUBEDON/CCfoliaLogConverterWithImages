# ココフォリア/Tekeyログ整形ツール (画像埋め込み機能付き)

## 概要

このツールは、ココフォリアおよび Tekey で出力されたHTML形式のチャットログを整形し、より見やすく、共有しやすい形式に変換するためのWebアプリケーションです。
キャラクターアイコンの設定、吹き出しの色やフォントのカスタマイズ、ログへの画像挿入、見出しの追加など、多彩な編集機能を提供します。
編集した内容はプロジェクトファイルとして保存・読み込みが可能で、最終的なログは画像やCSSを含んだZIPファイルとしてエクスポートできます。

## 主な機能

*   **ログファイルの読み込み**:
    *   ココフォリア形式のHTMLログ
    *   Tekey形式のHTMLログ (v2形式推奨)
    *   本ツールで保存したプロジェクトファイル (`.cclogproj`)
*   **キャラクター設定**:
    *   発言者ごとの表示名、デフォルトアイコン、向き（左右）、テーマカラー、文字色の設定
    *   表情差分アイコンの登録と、メッセージごとの適用
    *   新規キャラクターの追加
*   **表示カスタマイズ**:
    *   吹き出しの色（左右別）、フォントサイズ、ログエリア背景色、アイコンサイズ、吹き出し最大幅の調整
    *   フォントファミリーの選択（Noto Sans JP、Inter、Noto Serif JP、M PLUS Rounded 1c、各種システムフォント）
    *   ログ表示エリアの高さ調整
    *   基本文字色、文字の縁取り色の設定
    *   出力ログ用の背景画像設定（ぼかし・明度補正付き）
    *   アイコン下に名前を表示するモードの切り替え
*   **ログ編集機能**:
    *   タブおよび発言者によるログフィルタリング
    *   ログの先頭への画像挿入
    *   メッセージごとの表示モード切替（吹き出し/地の文）
    *   メッセージごとのアイコン変更（デフォルト/表情差分/個別アップロード）
    *   メッセージごとの向き変更（キャラクター設定を上書き）
    *   メッセージ内容の直接編集
    *   任意の箇所への画像挿入（キャプション付き）
    *   任意の箇所への見出し挿入（H1～H6レベル）
    *   任意の箇所への新規発言追加
    *   不要なメッセージや画像の削除（削除確認の省略オプションあり）
*   **プロジェクト管理**:
    *   編集中の状態をプロジェクトファイル (`.cclogproj`) として保存・読み込み
    *   キャラクター設定や表示カスタマイズ設定のブラウザLocalStorageへの一時保存・読み込み
*   **エクスポート**:
    *   整形・編集済みのログを、表示用のHTML、CSS、画像ファイル一式をまとめたZIPファイルとして出力
    *   出力時のHTMLタイトル、ZIPファイル名のカスタマイズ

## 使い方

1.  **ファイルの準備**:
    *   ココフォリアまたはTekeyからチャットログをHTML形式でエクスポートしておきます。
2.  **ツールの起動**:
    *   [`index.html`](index.html) ファイルをウェブブラウザで開きます。特別なサーバー環境は不要です。
3.  **ログの読み込み**:
    *   画面上部の「ココフォリアログ選択」「Tekeyログ選択」ボタンから、準備したログファイルを読み込みます。
    *   または、以前このツールで保存したプロジェクトファイル (`.cclogproj`) を「プロジェクト(.cclogproj)選択」ボタンから読み込みます。
4.  **キャラクター設定**:
    *   「キャラクター設定」タブを開き、ログから検出された発言者ごとに、表示名、アイコン、向き、テーマ色、文字色などを設定します。
    *   必要に応じて表情差分アイコンを登録したり、新規キャラクターを追加したりします。
5.  **表示カスタマイズ**:
    *   「表示カスタマイズ」タブを開き、フォント、各種色、サイズなどを好みに合わせて調整します。
6.  **ログの編集**:
    *   ログ表示エリアで、フィルタリングをかけたり、不要なメッセージを削除したり、画像や見出しを挿入したりして、ログを整形します。
7.  **保存・エクスポート**:
    *   編集途中の状態を保存したい場合は、「プロジェクトを保存 (.cclogproj)」ボタンをクリックします。
    *   完成したログを共有可能な形式で出力したい場合は、「整形済みログをZIPで出力」ボタンをクリックします。HTMLタイトルやZIPファイル名もここで指定できます。

## 使用技術

*   HTML5
*   CSS3 (Tailwind CSSフレームワーク利用)
*   JavaScript (ES6+)
*   JSZip (ZIPファイル生成ライブラリ)

## 作者

*   しるべ ([@qxoiUioxp](https://x.com/qxoiUioxp))
